{
  "packages": {
    "process-compose": "latest",
    "act":             "latest",
    "shellcheck":      "latest"
  },
  "shell": {
    "scripts": {
      "lint-android": [
        "echo 'Running shellcheck on Android plugin scripts...'",
        "shellcheck -S warning devbox/plugins/android/scripts/*.sh"
      ],
      "test-android-lib": [
        "echo 'Testing Android lib.sh functions...'",
        "bash devbox/plugins/tests/android/test-lib.sh"
      ],
      "test-android-devices": [
        "echo 'Testing Android devices.sh CLI...'",
        "bash devbox/plugins/tests/android/test-devices.sh"
      ],
      "test-android": [
        "devbox run lint-android",
        "devbox run test-android-lib",
        "devbox run test-android-devices"
      ],
      "lint-ios": [
        "echo 'Running shellcheck on iOS plugin scripts...'",
        "shellcheck -S warning devbox/plugins/ios/scripts/*.sh"
      ],
      "test-ios-lib": [
        "echo 'Testing iOS lib.sh functions...'",
        "sh devbox/plugins/tests/ios/test-lib.sh"
      ],
      "test-ios": [
        "devbox run lint-ios",
        "devbox run test-ios-lib"
      ],
      "lint-react-native": [
        "echo 'Running shellcheck on React Native plugin scripts...'",
        "shellcheck -S warning devbox/plugins/react-native/scripts/*.sh"
      ],
      "test-react-native": [
        "devbox run lint-react-native"
      ],
      "lint-all": [
        "echo 'Running shellcheck on all plugins...'",
        "shellcheck -S warning devbox/plugins/*/scripts/*.sh"
      ],
      "check-workflows": [
        "echo 'Checking GitHub workflow syntax...'",
        "for workflow in .github/workflows/*.yml; do",
        "  echo \"  Validating $(basename $workflow)...\"",
        "  act -W \"$workflow\" -l > /dev/null 2>&1 || {",
        "    echo \"    ✗ Syntax error in $workflow\"",
        "    act -W \"$workflow\" -l 2>&1 | head -20",
        "    exit 1",
        "  }",
        "  echo \"    ✓ $(basename $workflow)\"",
        "done",
        "echo 'All workflows valid!'"
      ],
      "test-all": [
        "echo '========================================='",
        "echo 'Running all tests and checks...'",
        "echo '========================================='",
        "echo ''",
        "echo '1/6 Linting all plugin scripts...'",
        "devbox run lint-all",
        "echo ''",
        "echo '2/6 Testing Android plugin...'",
        "devbox run test-android",
        "echo ''",
        "echo '3/6 Testing iOS plugin...'",
        "devbox run test-ios",
        "echo ''",
        "echo '4/6 Testing React Native plugin...'",
        "devbox run test-react-native",
        "echo ''",
        "echo '5/6 Validating GitHub workflows...'",
        "devbox run check-workflows",
        "echo ''",
        "echo '========================================='",
        "echo '✓ All tests passed!'",
        "echo '========================================='",
        "echo ''",
        "echo 'Summary:'",
        "echo '  - Shellcheck: all plugin scripts'",
        "echo '  - Android: lib.sh + devices.sh tests'",
        "echo '  - iOS: lib.sh tests'",
        "echo '  - React Native: lint checks'",
        "echo '  - GitHub Actions: workflow syntax validation'"
      ]
    }
  }
}
