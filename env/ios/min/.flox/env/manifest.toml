version = 1

[install]
ios-tooling.flake = "github:segment-integrations/templates#ios-tooling"
[vars]
IOS_SIM_DEVICE = "iPhone 13"
IOS_MIN_RUNTIME = "15.0"
[hook]
[profile]
[services]
ios-simulator-min.command = """
bash -lc '
set -euo pipefail

project_root="${PROJECT_ROOT:-$(git rev-parse --show-toplevel 2>/dev/null || pwd)}"
cd "$project_root"

IOS_MANAGER_FOREGROUND=1 IOS_FLAVOR=minsdk ios-tooling start
'
"""
[include]
environments = [
    { dir = "../common" },
    { dir = "../../nodejs" }
]
[build]
[options]
